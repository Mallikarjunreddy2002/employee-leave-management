{% extends 'base.html' %}{% block title %}My Leave History{% endblock %}
{% block content %}
<div class="row mb-3">
<div class="col-6 col-md-3 mb-2"><div class="card text-center shadow-sm"><div class="card-body py-2"><small class="text-muted">Total</small><h3 class="text-primary mb-0">{{ total }}</h3></div></div></div>
<div class="col-6 col-md-3 mb-2"><div class="card text-center shadow-sm"><div class="card-body py-2"><small class="text-muted">Approved</small><h3 class="text-success mb-0">{{ approved_count }}</h3></div></div></div>
<div class="col-6 col-md-3 mb-2"><div class="card text-center shadow-sm"><div class="card-body py-2"><small class="text-muted">Pending</small><h3 class="text-warning mb-0">{{ pending_count }}</h3></div></div></div>
<div class="col-6 col-md-3 mb-2"><div class="card text-center shadow-sm"><div class="card-body py-2"><small class="text-muted">Rejected</small><h3 class="text-danger mb-0">{{ rejected_count }}</h3></div></div></div>
</div>
<div class="card shadow">
<div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
<h4 class="mb-0"><i class="fas fa-list-alt"></i> My Personal Leave Applications</h4>
<a href="{% url 'manager_apply' %}" class="btn btn-sm btn-light"><i class="fas fa-plus"></i> Apply New</a>
</div>
<div class="card-body p-0">
{% if leaves %}
<div class="table-responsive">
<table class="table table-hover mb-0">
<thead class="thead-light"><tr><th>Leave ID</th><th>Type</th><th>From</th><th>To</th><th>Days</th><th>Status</th><th>Admin Comment</th><th>Action</th></tr></thead>
<tbody>
{% for leave in leaves %}
<tr>
<td><span class="badge badge-secondary">LEAVE-{{ leave.leave_id }}</span></td>
<td>{{ leave.get_leave_type_display }}</td>
<td>{{ leave.start_date|date:"d M Y" }}</td>
<td>{{ leave.end_date|date:"d M Y" }}</td>
<td>{{ leave.total_days }}</td>
<td><span class="badge badge-{{ leave.status_badge }} p-2">{{ leave.get_status_display }}</span></td>
<td><small class="text-muted">{{ leave.review_comment|default:"â€”" }}</small></td>
<td>
<a href="{% url 'leave_detail' leave.leave_id %}" class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i></a>
{% if leave.is_pending %}<a href="{% url 'manager_cancel' leave.leave_id %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Cancel?')"><i class="fas fa-trash"></i></a>{% endif %}
</td>
</tr>{% endfor %}
</tbody></table></div>
{% else %}<div class="text-center py-5 text-muted"><i class="fas fa-inbox fa-3x mb-3"></i><p>No personal applications yet.</p><a href="{% url 'manager_apply' %}" class="btn btn-primary">Apply Leave</a></div>{% endif %}
</div></div>
{% endblock %}
