{% extends 'base.html' %}{% block title %}Pending Approvals{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
<h2><i class="fas fa-clock text-warning"></i> Pending Employee Leave Approvals</h2>
<a href="{% url 'manager_dashboard' %}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Back</a>
</div>
<div class="card shadow">
<div class="card-header bg-warning text-dark"><strong>Showing employee leaves from your department requiring approval</strong></div>
<div class="card-body p-0">
{% if pending_leaves %}
<div class="table-responsive">
<table class="table table-hover mb-0">
<thead class="thead-light"><tr><th>Leave ID</th><th>Employee</th><th>Type</th><th>From</th><th>To</th><th>Days</th><th>Reason</th><th>Applied</th><th>Action</th></tr></thead>
<tbody>
{% for leave in pending_leaves %}
<tr>
<td><span class="badge badge-secondary">LEAVE-{{ leave.leave_id }}</span></td>
<td><strong>{{ leave.applicant.get_full_name|default:leave.applicant.username }}</strong><br><small class="text-muted">{{ leave.applicant.employee_id }} | {{ leave.applicant.department }}</small></td>
<td><span class="badge badge-info">{{ leave.get_leave_type_display }}</span></td>
<td>{{ leave.start_date|date:"d M Y" }}</td>
<td>{{ leave.end_date|date:"d M Y" }}</td>
<td><strong>{{ leave.total_days }}</strong></td>
<td><small>{{ leave.reason|truncatechars:40 }}</small></td>
<td><small>{{ leave.applied_date|date:"d M Y" }}</small></td>
<td>
<a href="{% url 'manager_review' leave.leave_id %}" class="btn btn-sm btn-success">
<i class="fas fa-gavel"></i> Review
</a>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% else %}
<div class="text-center py-5 text-muted">
<i class="fas fa-check-circle fa-4x text-success mb-3"></i>
<h5>No pending applications. All clear!</h5>
</div>
{% endif %}
</div></div>
{% endblock %}
